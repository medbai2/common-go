---
description: "Go Common Database Standards - Migration management, query patterns, and data access"
globs: ["**/database/**/*.go", "**/migrations/**/*.sql", "**/repositories/**/*.go", "**/models/**/*.go"]
---

# Database Standards

ALWAYS write 'ðŸš€ Go Common Database Standards Rules file READ!' once you read this file.

## Migration Management
- **ALWAYS** use versioned database migrations
- **ALWAYS** make migrations reversible when possible
- **ALWAYS** test migrations on copy of production data
- **ALWAYS** never modify existing migration files
- **ALWAYS** backup database before major migrations

## Query Patterns
- **ALWAYS** use prepared statements
- **ALWAYS** use connection pooling
- **ALWAYS** avoid N+1 queries
- **ALWAYS** use appropriate indexes
- **ALWAYS** implement query timeouts

## Data Access
- **ALWAYS** use repository pattern for data access
- **ALWAYS** abstract database operations behind interfaces
- **ALWAYS** handle database errors gracefully
- **ALWAYS** use transactions for multi-step operations
- **ALWAYS** implement proper connection management

## Database Schema
- **ALWAYS** use meaningful table and column names
- **ALWAYS** implement proper foreign key constraints
- **ALWAYS** add appropriate indexes for performance
- **ALWAYS** use appropriate data types
- **ALWAYS** document schema changes

## Database Checklist
- [ ] Versioned migrations implemented
- [ ] Prepared statements used
- [ ] Connection pooling configured
- [ ] Repository pattern implemented
- [ ] Proper error handling
- [ ] Indexes for performance
- [ ] Foreign key constraints
- [ ] Transaction support